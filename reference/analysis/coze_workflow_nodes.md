# Coze工作流节点分析

## 主要节点列表

### 1. 文案生成节点 (Node ID: 121343)
- **类型**: LLM节点 (type: 3)
- **标题**: 大模型_根据主题生成文案
- **功能**: 根据用户输入的主题生成历史故事文案
- **输入**: 主题字符串
- **输出**: 完整的口播文案内容
- **模型**: DeepSeek-V3
- **温度**: 0.8
- **最大tokens**: 1024

### 2. 主题提取节点 (Node ID: 1199098)
- **类型**: LLM节点 (type: 3)
- **标题**: 大模型_主题生成
- **功能**: 从生成的故事文案中提取2个字的主题
- **输入**: 故事原文内容
- **输出**: 2个字的主题标题
- **模型**: DeepSeek-V3
- **温度**: 1.0

### 3. 批处理节点 (Node ID: 121555)
- **类型**: 批处理节点 (type: 28)
- **标题**: 批处理
- **功能**: 处理场景分镜并批量生成图像和音频
- **输入**: 场景列表 (scenes)
- **输出**: 
  - image_list: 图像URL列表
  - link_list: 音频链接列表
  - duration_list: 时长列表

### 4. 场景分镜生成节点 (Node ID: 186126)
- **类型**: LLM节点 (需要进一步查看)
- **功能**: 将文案分解为多个场景镜头
- **输出**: 场景对象数组，包含cap(字幕)和desc_promopt(描述提示词)

### 5. 图像生成节点 (Node ID: 131139)
- **类型**: 图像生成节点 (type: 16)
- **标题**: 图像生成
- **功能**: 根据描述提示词生成古代惊悚插画风格图片
- **输入**: desc_promopt (描述提示词)
- **提示词模板**: "古代惊悚插画风格：{{desc_promopt}}"
- **图像设置**: 1024x768, 40步采样

### 6. 图像优化节点 (Node ID: 1667619)
- **类型**: 图像生成节点 (type: 16)
- **标题**: 图像生成_1
- **功能**: 使用优化后的提示词重新生成图像
- **输入**: 经过智能优化的提示词

### 7. 提示词优化节点 (Node ID: 109484)
- **类型**: 插件节点 (type: 4)
- **标题**: 智能优化图片提示词
- **插件**: sd_better_prompt
- **功能**: 优化图像生成提示词

### 8. 选择器节点 (Node ID: 133787)
- **类型**: 条件选择器 (type: 8)
- **功能**: 根据条件选择使用哪个图像生成结果

### 9. 图像合并代码节点 (Node ID: 187299)
- **类型**: 代码节点 (type: 5)
- **功能**: 合并两个图像生成结果，优先使用第一个
- **输出**: image_url

### 10. TTS语音合成节点 (Node ID: 182040)
- **类型**: 插件节点 (type: 4)
- **标题**: 音色与文本合成音频
- **插件**: speech_synthesis
- **功能**: 将文本转换为语音

### 11. 音频时长计算节点 (Node ID: 178228)
- **类型**: 代码节点 (需要进一步查看)
- **功能**: 计算音频时长
- **输出**: duration

### 12. 视频合成节点 (Node ID: 103599)
- **功能**: 将图像、音频、字幕合成最终视频

## 数据流向

1. 用户输入主题 → 
2. 文案生成 → 
3. 主题提取 + 场景分镜生成 → 
4. 批处理(图像生成 + 语音合成 + 时长计算) → 
5. 视频合成 → 
6. 最终输出