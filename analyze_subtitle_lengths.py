#!/usr/bin/env python3
"""
åˆ†æå­—å¹•é•¿åº¦åˆ†å¸ƒ
"""
import re

# ä»SRTæ–‡ä»¶å†…å®¹åˆ†æ
srt_content = """1
00:00:00,000 --> 00:00:02,070
ä½ æ˜¯ä¸‡å†å¹´çš„æ–°ç§‘è¿›å£«

2
00:00:02,070 --> 00:00:05,383
åˆæˆæµ™æ±Ÿé’±å¡˜å¿ä»¤è¾–åŒºè±ªç»…å„æ–­æ¼•è¿

3
00:00:05,383 --> 00:00:07,040
ä¸Šçº§çŸ¥åºœæš—ä¸­ç´¢è´¿

4
00:00:07,200 --> 00:00:09,574
æ‰åˆ°ä»»ä¸‰å¤©å¸ˆçˆ·å°±é€’æ¥è´¦æœ¬

5
00:00:09,574 --> 00:00:12,541
ä½å£°è¯´"éƒ­å°šä¹¦å®¶ä¸‰å…¬å­å¼ºå æ°‘ç”°

6
00:00:12,541 --> 00:00:13,926
è‹¦ä¸»æ‚¬æ¢è‡ªå°½"

7
00:00:14,076 --> 00:00:15,017
ä½ æ‹æ¡ˆè¦æŸ¥

8
00:00:15,017 --> 00:00:17,653
å½“å¤œä¹¦æˆ¿çª—æ£‚çªç„¶å°„è¿›ä¸€æ”¯æ¯’ç®­

9
00:00:17,653 --> 00:00:20,477
é’‰ç€è¡€ä¹¦"å¤šç®¡é—²äº‹è€…æ›å°¸è¿æ²³"

10
00:00:20,628 --> 00:00:23,247
æ¬¡æ—¥æ¸…æ—©å¿ä»“å‚¨ç²®è«åå‘éœ‰

11
00:00:23,247 --> 00:00:26,739
é¼ å°¸å †ä¸­é£˜å‡ºæ¶è‡­è¡™å½¹é›†ä½“ç§°ç—…å‘Šå‡

12
00:00:26,891 --> 00:00:29,285
æ›´è‡´å‘½çš„æ˜¯è‹¦ä¸»å¥³å„¿çªç„¶ç¿»ä¾›

13
00:00:29,285 --> 00:00:32,968
è·ªåœ¨å…¬å ‚å“­å–Š"é’å¤©å¤§è€çˆ·é€¼æ°‘å¥³è¯¬é™·è‰¯å•†"

14
00:00:33,119 --> 00:00:34,592
ä½ å½“è¡—ç„šçƒ§å‡è´¦æœ¬

15
00:00:34,592 --> 00:00:36,433
ç«å…‰ç…§äº®ç™¾å§“æƒŠæƒ¶çš„è„¸

16
00:00:36,576 --> 00:00:39,357
æš—ä¸­å°†å°šä¹¦å…¬å­çš„å¯†ä¿¡æŠ„é€å…¶æ”¿æ•Œ

17
00:00:39,357 --> 00:00:41,027
å€Ÿæµ™å…šæ¸…æµä¹‹åŠ¿æ–½å‹

18
00:00:41,183 --> 00:00:42,853
æœ€åäº®å‡ºå¾¡èµå¯†æŠ˜æƒ

19
00:00:42,853 --> 00:00:45,449
ç›´å¥å¤©å­"æ¼•è¿è´ªè…é“¾æ¶‰çš‡å•†"

20
00:00:45,612 --> 00:00:47,609
ä¸‰æ—¥åç¼‡éª‘ç ´é—¨è€Œå…¥

21
00:00:47,609 --> 00:00:50,272
ä½ ä»¥"æ¬ºå›ç½ª"è¢«é”å…¥è¯ç‹±

22
00:00:50,435 --> 00:00:51,949
å¢™è§’è¡€æ±¡æ²¾æ¹¿å›šè¡£

23
00:00:51,949 --> 00:00:55,165
ç‹±å’ä½å£°å¹"éƒ­å°šä¹¦æäº†ä¸‰ä¸‡ä¸¤çŠ’è¾¹"

24
00:00:55,332 --> 00:00:58,784
æ–­å¤´å°ä¸Šï¼Œä½ çœ‹è§ç™¾å§“æ²¿è¡—ç„šé¦™æ³£æ‹œ

25
00:00:58,932 --> 00:01:00,817
è¿™ä¸€åˆ»ä½ ç»ˆäºæ˜ç™½ï¼Œ

26
00:01:00,984 --> 00:01:03,078
çš‡æƒä¹‹ä¸‹ä»æ— æ¸…å®˜ï¼Œ

27
00:01:03,216 --> 00:01:05,705
åªæœ‰æ£‹å­ä¸å¼ƒå­çš„æ®‹é…·åšå¼ˆ"""

# è§£æå­—å¹•æ–‡æœ¬
srt_pattern = r'(\d+)\s*\n(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})\s*\n(.*?)\n'
matches = re.findall(srt_pattern, srt_content, re.DOTALL)

print("=== å­—å¹•é•¿åº¦åˆ†æ ===")
print(f"æ€»å­—å¹•æ®µè½æ•°: {len(matches)}")
print("-" * 60)

lengths = []
long_subtitles = []
very_long_subtitles = []

for i, match in enumerate(matches, 1):
    sequence, start_time, end_time, text = match
    text = text.strip()
    length = len(text)
    lengths.append(length)
    
    status = ""
    if length > 15:
        very_long_subtitles.append((i, text, length))
        status = "ğŸ”´ è¶…é•¿"
    elif length > 12:
        long_subtitles.append((i, text, length))
        status = "ğŸŸ¡ åé•¿"
    elif length > 8:
        status = "ğŸŸ¢ æ­£å¸¸"
    else:
        status = "ğŸ”µ åçŸ­"
    
    print(f"{i:2d}: {length:2d}å­—ç¬¦ {status} | {text}")

print("\n" + "=" * 60)
print("ğŸ“Š ç»Ÿè®¡åˆ†æ:")
print(f"å¹³å‡é•¿åº¦: {sum(lengths)/len(lengths):.1f} å­—ç¬¦")
print(f"æœ€å¤§é•¿åº¦: {max(lengths)} å­—ç¬¦")
print(f"æœ€å°é•¿åº¦: {min(lengths)} å­—ç¬¦")

print(f"\nğŸŸ¡ åé•¿å­—å¹• (>12å­—ç¬¦): {len(long_subtitles)}æ¡")
for seq, text, length in long_subtitles:
    print(f"  #{seq}: {length}å­—ç¬¦ - {text}")

print(f"\nğŸ”´ è¶…é•¿å­—å¹• (>15å­—ç¬¦): {len(very_long_subtitles)}æ¡")
for seq, text, length in very_long_subtitles:
    print(f"  #{seq}: {length}å­—ç¬¦ - {text}")
    
    # åˆ†ææ˜¯å¦åŒ…å«å¤šå¥è¯
    sentence_count = len([p for p in text if p in 'ã€‚ï¼ï¼Ÿ'])
    comma_count = len([p for p in text if p in 'ï¼Œã€'])
    if sentence_count > 0:
        print(f"    ğŸ’¥ åŒ…å«{sentence_count}ä¸ªå¥å­ç»“æŸç¬¦")
    if comma_count > 1:
        print(f"    ğŸ’¥ åŒ…å«{comma_count}ä¸ªé€—å·/é¡¿å·")
    print()

print("=" * 60)
print("ğŸ” é—®é¢˜åˆ†æ:")
print("1. å­˜åœ¨å¤šä¸ªè¶…è¿‡15å­—ç¬¦çš„å­—å¹•æ®µè½")
print("2. éƒ¨åˆ†å­—å¹•åŒ…å«å¤šä¸ªå¥å­æˆ–çŸ­è¯­")
print("3. å­—å¹•åˆ†å‰²ç²’åº¦è¿‡ç²—ï¼Œéœ€è¦è¿›ä¸€æ­¥ç»†åˆ†")

# ä¼°ç®—åƒç´ å®½åº¦
print(f"\nğŸ“ åƒç´ å®½åº¦ä¼°ç®— (å­—ä½“48px):")
for seq, text, length in very_long_subtitles[:3]:  # åªåˆ†æå‰3ä¸ªæœ€é•¿çš„
    estimated_width = length * 48  # ç®€å•ä¼°ç®—
    print(f"  #{seq}: {text}")
    print(f"    ä¼°ç®—å®½åº¦: {estimated_width}px (è¶…å‡º640pxé™åˆ¶)")